---
- name: playbook
  hosts: pruebas
  remote_user: pruebas
  become: true
  tasks:
    - name : git pull
      command: chdir=/home/hurieluv2g2d93/practica4-sa git pull
    - name : stop container
      command: chdir=/home/hurieluv2g2d93/practica4-sa sudo docker stop practica
    - name : remove container
      command: chdir=/home/hurieluv2g2d93/practica4-sa sudo docker rm practica
    - name : remove image
      command: chdir=/home/hurieluv2g2d93/practica4-sa sudo docker rmi imagen
    - name : build image
      command: chdir=/home/hurieluv2g2d93/practica4-sa sudo docker build -t imagen .
    - name : run
      command: chdir=/home/hurieluv2g2d93/practica4-sa sudo docker run --name practica -p 8082:4000 -d imagen